generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model CatClientes {
  CatCodigo String     @id @db.Char(3)
  CatNombre String     @db.VarChar(50)
  clientes  clientes[]
}

model api_providers {
  id                BigInt  @id @default(autoincrement()) @db.UnsignedBigInt
  name              String  @unique(map: "name") @db.VarChar(255)
  description       String? @db.Text
  auth_type         String  @db.VarChar(50)
  auth_handler_name String? @db.VarChar(255)
}

model aplicapagos {
  id        Int      @id @default(autoincrement())
  idpago    Int
  idpedido  Int
  idcliente Int
  fecha     DateTime @db.DateTime(0)
  importe   Decimal  @db.Decimal(16, 2)
  saldo     Decimal  @db.Decimal(16, 2)
  pagos     pagos    @relation(fields: [idpago], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "aplicapagos_ibfk_1")
  pedidos   pedidos  @relation(fields: [idpedido], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "aplicapagos_ibfk_2")
  clientes  clientes @relation(fields: [idcliente], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "aplicapagos_ibfk_3")

  @@index([idcliente], map: "idcliente")
  @@index([idpago], map: "idpago")
  @@index([idpedido], map: "idpedido")
}

model chatbot_roles {
  id            Int      @id @default(autoincrement())
  role_name     String   @unique(map: "role_name") @db.VarChar(50)
  color_code    String   @db.VarChar(7)
  system_prompt String   @db.Text
  keywords      String   @db.Text
  priority      Int      @default(1)
  is_active     Boolean? @default(true)
  created_at    DateTime @default(now()) @db.Timestamp(0)
  updated_at    DateTime @default(now()) @db.Timestamp(0)
}

model clientes {
  id                                Int                   @id @default(autoincrement())
  nombre                            String                @db.VarChar(200)
  razonSocial                       String                @db.VarChar(200)
  cuit                              String                @db.VarChar(15)
  domicilio                         String                @db.VarChar(200)
  entre                             String                @db.VarChar(200)
  localidad                         String                @db.VarChar(200)
  codpostal                         String                @db.VarChar(10)
  horario                           String                @db.VarChar(50)
  nomContacto                       String                @db.VarChar(100)
  TE                                String                @db.VarChar(20)
  Celular                           String                @db.VarChar(20)
  email                             String                @db.VarChar(100)
  fechaAlta                         DateTime              @db.Date
  deuda                             Decimal               @db.Decimal(15, 2)
  fechaUltimoMov                    DateTime?             @db.Date
  fechaUltimoPago                   DateTime?             @db.Date
  tipoIva                           Int?
  comentarios                       String                @db.Text
  vendedor                          Int
  CatCliente                        String?               @db.Char(3)
  idSecundario                      Int?
  usuario                           String?               @db.VarChar(32)
  pwd                               String?               @db.VarChar(16)
  porcentaje1                       Int?
  porcentaje2                       Int?
  porcentaje3                       Int?
  aplicapagos                       aplicapagos[]
  tipoIva_clientes_tipoIvaTotipoIva tipoIva?              @relation("clientes_tipoIvaTotipoIva", fields: [tipoIva], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "clientes_ibfk_1")
  vendedores                        vendedores            @relation(fields: [vendedor], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "clientes_ibfk_2")
  CatClientes                       CatClientes?          @relation(fields: [CatCliente], references: [CatCodigo], onDelete: NoAction, onUpdate: NoAction, map: "clientes_ibfk_3")
  pagos                             pagos[]
  pedidos                           pedidos[]
  prepedidos_cabecera               prepedidos_cabecera[]

  @@index([CatCliente], map: "clientes_ibfk_3")
  @@index([tipoIva], map: "tipoIva")
  @@index([vendedor], map: "vendedor")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model deuda {
  C_digo  Int?     @map("Código")
  Cliente String?  @db.VarChar(255)
  Deuda   Decimal? @db.Decimal(10, 2)

  @@ignore
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model deuda2 {
  Cod    Int?
  Nombre String?  @db.VarChar(255)
  Deuda  Decimal? @db.Decimal(10, 2)

  @@ignore
}

model envases {
  id           Int         @id @default(autoincrement())
  nombre       String      @db.VarChar(100)
  litros       Decimal     @db.Decimal(10, 4)
  tipoenvaseid Int?
  tipoEnvase   tipoEnvase? @relation(fields: [tipoenvaseid], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "envases_ibfk_1")
  productos    productos[]

  @@index([tipoenvaseid], map: "tipoenvaseid")
}

model ingStock {
  IngStockId       Int      @id @default(autoincrement())
  ProveedorId      Int
  NroComprobante   String   @db.VarChar(30)
  IngStockFecha    DateTime @db.Date
  IngStockMonto    Decimal  @db.Decimal(16, 2)
  IngStockUnidades Int

  @@index([ProveedorId], map: "ProveedorId")
}

model ingStockItems {
  IngStockItemsId             Int     @id @default(autoincrement())
  IngStockId                  Int
  ProductoId                  Int
  IngStockItemsCantidad       Int
  IngStockItemsPrecioUnitario Decimal @db.Decimal(10, 0)
  IngStockItemsPrecioTotal    Decimal @db.Decimal(10, 0)

  @@index([IngStockId], map: "IngStockId")
  @@index([ProductoId], map: "ProductoId")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model maeclientes {
  Vendedor      String? @db.VarChar(255)
  Cod           Int?
  Nombre        String? @db.VarChar(255)
  Domicilio     String? @db.VarChar(255)
  EntreCalles   String? @db.VarChar(255)
  Localidad     String? @db.VarChar(255)
  CP            String? @db.VarChar(255)
  Horario       String? @db.VarChar(255)
  Contacto      String? @db.VarChar(255)
  Tel_fono_fijo String? @map("Teléfono fijo") @db.VarChar(255)
  Celular       String? @db.VarChar(255)
  Email         String? @db.VarChar(255)
  RazonSocial   String? @db.VarChar(255)
  TipoIVA       String? @db.VarChar(255)
  cuit          String? @db.VarChar(255)
  iva           Int?

  @@ignore
}

model marcas {
  id        Int         @id @default(autoincrement())
  nombre    String      @db.VarChar(100)
  productos productos[]
}

model ofertas {
  id                 Int                  @id @default(autoincrement())
  titulo             String               @db.VarChar(255)
  descripcion        String?              @db.Text
  fecha_inicio       DateTime             @db.Date
  fecha_fin          DateTime             @db.Date
  activa             Boolean              @default(true)
  created_at         DateTime             @default(now()) @db.Timestamp(0)
  tipo               ofertas_tipo         @default(unitaria)
  modo_precio        ofertas_modo_precio  @default(precio_unitario)
  valor_precio       Decimal?             @db.Decimal(12, 2)
  min_unidades_total Int?
  unidad_base        ofertas_unidad_base?
  ofertas_detalle    ofertas_detalle[]

  @@index([activa, tipo], map: "idx_activa_tipo")
  @@index([fecha_inicio, fecha_fin, activa], map: "idx_fechas_activa")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model ofertas_backup {
  id                 Int
  titulo             String                      @db.VarChar(255)
  descripcion        String?                     @db.Text
  fecha_inicio       DateTime                    @db.Date
  fecha_fin          DateTime                    @db.Date
  activa             Boolean
  created_at         DateTime                    @db.Timestamp(0)
  tipo               ofertas_backup_tipo
  modo_precio        ofertas_backup_modo_precio
  valor_precio       Decimal?                    @db.Decimal(12, 2)
  min_unidades_total Int?
  unidad_base        ofertas_backup_unidad_base?

  @@ignore
}

model ofertas_detalle {
  id             Int       @id @default(autoincrement())
  oferta_id      Int
  producto_id    Int
  unidades_fijas Int?
  ofertas        ofertas   @relation(fields: [oferta_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_ofertas_detalle_oferta")
  productos      productos @relation(fields: [producto_id], references: [id], onUpdate: Restrict, map: "fk_ofertas_detalle_producto")

  @@index([oferta_id], map: "idx_oferta")
  @@index([producto_id], map: "idx_producto")
}

model origen {
  nombre String @id @db.VarChar(20)
}

model pagos {
  id              Int            @id @default(autoincrement())
  clienteId       Int
  tipoMedioPagoId Int
  fechaRecep      DateTime       @db.Date
  importe         Decimal        @db.Decimal(16, 2)
  receptor        String         @db.VarChar(255)
  observaciones   String?        @db.Text
  chFecha         DateTime?      @db.Date
  chVto           DateTime?      @db.Date
  chNumero        Int?
  chBanco         String?        @db.VarChar(100)
  estado          String?        @db.VarChar(20)
  procesado       String         @db.Char(1)
  aplicapagos     aplicapagos[]
  clientes        clientes       @relation(fields: [clienteId], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "pagos_ibfk_1")
  tipoMediosPago  tipoMediosPago @relation(fields: [tipoMedioPagoId], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "pagos_ibfk_2")
  sec_users       sec_users      @relation(fields: [receptor], references: [login], onDelete: NoAction, onUpdate: Restrict, map: "pagos_ibfk_3")

  @@index([clienteId], map: "clienteId")
  @@index([receptor], map: "receptor")
  @@index([tipoMedioPagoId], map: "tipoMedioPagoId")
}

model parametros {
  Id                Int     @id @db.SmallInt
  server            String  @db.VarChar(80)
  usr               String  @db.VarChar(80)
  pwd               String  @db.VarChar(80)
  port              String  @db.VarChar(80)
  conn_type         String  @db.VarChar(80)
  from_mail         String  @db.VarChar(80)
  attachment_url    String  @db.VarChar(255)
  app_entry_point   String  @db.VarChar(255)
  modo_trabajo      String  @db.Char(1)
  mail_alta_usuario String  @db.LongText
  helpMensajes      String? @db.LongText
  helpProveedores   String? @db.LongText
  capeta_store_docs String? @db.Char(100)
  enviaMails        String? @db.Char(1)
  enviaWP           String? @db.Char(1)
  matenimiento      String? @db.Char(1)
  debug             String? @db.Char(1)
  mails             String? @db.Char(1)
  apiWP             String? @db.Char(50)
  eviURL            String? @db.VarChar(100)
  eviCuenta         String? @db.VarChar(100)
  eviPwd            String? @db.VarChar(100)
  eviMode           String? @db.VarChar(100)
  eviPin            String? @db.VarChar(100)
  eviPush           String? @db.VarChar(255)
}

model pedidoItems {
  id             Int       @id @default(autoincrement())
  pedidoId       Int
  productoId     Int
  cantidad       Int
  precioUnitario Decimal   @db.Decimal(16, 2)
  precioTotal    Decimal   @db.Decimal(16, 2)
  productos      productos @relation(fields: [productoId], references: [id], onUpdate: Restrict, map: "pedidoItems_ibfk_1")
  pedidos        pedidos   @relation(fields: [pedidoId], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "pedidoItems_ibfk_2")

  @@index([pedidoId], map: "pedidoId")
  @@index([productoId], map: "productoId")
}

model pedidos {
  id           Int           @id @default(autoincrement())
  cliente      Int
  fecha        DateTime      @db.DateTime(0)
  login        String        @db.VarChar(255)
  estado       String        @db.VarChar(20)
  bultos       Int
  importeTotal Decimal       @db.Decimal(16, 2)
  observacion  String?       @db.VarChar(255)
  fechaEntrega DateTime?     @db.Date
  saldo        Decimal?      @db.Decimal(16, 2)
  fechaSaldo   DateTime?     @db.Date
  usuario      String?       @db.VarChar(20)
  aplicapagos  aplicapagos[]
  pedidoItems  pedidoItems[]
  clientes     clientes      @relation(fields: [cliente], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "pedidos_ibfk_1")
  sec_users    sec_users     @relation(fields: [login], references: [login], onUpdate: Restrict, map: "pedidos_ibfk_2")

  @@index([cliente], map: "cliente")
  @@index([login], map: "login")
}

model prepedidos_cabecera {
  id               Int                         @id @default(autoincrement())
  cliente_id       Int
  fecha_creacion   DateTime?                   @default(now()) @db.DateTime(0)
  estado           prepedidos_cabecera_estado? @default(borrador)
  observaciones    String?                     @db.Text
  importeTotal     Decimal                     @default(0.00) @db.Decimal(12, 2)
  clientes         clientes                    @relation(fields: [cliente_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "prepedidos_cabecera_ibfk_1")
  prepedidos_items prepedidos_items[]

  @@index([cliente_id, estado], map: "idx_cliente_estado")
  @@index([fecha_creacion], map: "idx_fecha_creacion")
}

model prepedidos_items {
  id                  Int                 @id @default(autoincrement())
  prepedido_id        Int
  producto_id         Int
  ofertaid            Int?
  descripcion         String              @db.VarChar(255)
  cantidad            Int
  unidad              String?             @default("unidad") @db.VarChar(50)
  precio_estimado     Decimal?            @default(0.00) @db.Decimal(10, 2)
  importe_unitario    Decimal             @default(0.00) @db.Decimal(12, 2)
  observaciones       String?             @db.Text
  fecha_creacion      DateTime?           @default(now()) @db.DateTime(0)
  prepedidos_cabecera prepedidos_cabecera @relation(fields: [prepedido_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "prepedidos_items_ibfk_1")
  productos           productos           @relation(fields: [producto_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "prepedidos_items_ibfk_2")

  @@index([ofertaid], map: "idx_ofertaid")
  @@index([prepedido_id], map: "idx_prepedido")
  @@index([producto_id], map: "idx_producto")
}

model productos {
  id               Int                @id @default(autoincrement())
  codigo           String             @db.VarChar(20)
  nombre           String             @db.VarChar(150)
  marca            Int?
  origen           String             @db.VarChar(20)
  pack             String             @db.VarChar(20)
  envase           Int?
  stockMinimo      Int?
  stockActual      Int?
  stockReservado   Int?
  precioCompra     Decimal?           @db.Decimal(10, 2)
  precioVenta      Decimal?           @db.Decimal(10, 2)
  rentabilidad     Decimal?           @db.Decimal(10, 2)
  foto             Bytes?             @db.MediumBlob
  ofertas_detalle  ofertas_detalle[]
  pedidoItems      pedidoItems[]
  prepedidos_items prepedidos_items[]
  envases          envases?           @relation(fields: [envase], references: [id], onDelete: NoAction, onUpdate: Restrict, map: "productos_ibfk_1")
  marcas           marcas?            @relation(fields: [marca], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "productos_ibfk_3")

  @@index([envase], map: "envase")
  @@index([marca], map: "marca")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model prodv2 {
  Marca          String?  @db.VarChar(255)
  CODIGO         String?  @db.VarChar(255)
  DESCRIPCION    String?  @db.VarChar(255)
  ORIGEN         String?  @db.VarChar(255)
  PACK           String?  @db.VarChar(255)
  Litros         Decimal? @db.Decimal(10, 3)
  categoria      String?  @db.VarChar(255)
  stock          Int?
  Stock_minimo   Int?     @map("Stock minimo")
  costo_unitario String?  @map("costo unitario") @db.VarChar(255)
  Venta_Unitario Int?     @map("Venta Unitario")
  field_L        String?  @db.VarChar(255)
  field_M        String?  @db.VarChar(255)
  field_N        String?  @db.VarChar(255)
  field_O        String?  @db.VarChar(255)

  @@ignore
}

model proveedores {
  proveedorId        Int    @id @default(autoincrement())
  proveedorNombre    String @db.Char(100)
  proveedorTE        String @db.Char(50)
  proveedorDireccion String @db.Char(100)
}

model sc_log {
  id            Int       @id @default(autoincrement())
  inserted_date DateTime? @db.DateTime(0)
  username      String    @db.VarChar(90)
  application   String    @db.VarChar(200)
  creator       String    @db.VarChar(30)
  ip_user       String    @db.VarChar(32)
  action        String    @db.VarChar(30)
  description   String?   @db.Text
}

model sec_apps {
  app_name        String            @id @db.VarChar(128)
  app_type        String?           @db.VarChar(255)
  description     String?           @db.VarChar(255)
  sec_groups_apps sec_groups_apps[]
}

model sec_groups {
  group_id         Int                @id @default(autoincrement())
  description      String?            @unique(map: "description") @db.VarChar(255)
  sec_groups_apps  sec_groups_apps[]
  sec_users_groups sec_users_groups[]
}

model sec_groups_apps {
  group_id    Int
  app_name    String     @db.VarChar(128)
  priv_access String?    @db.VarChar(1)
  priv_insert String?    @db.VarChar(1)
  priv_delete String?    @db.VarChar(1)
  priv_update String?    @db.VarChar(1)
  priv_export String?    @db.VarChar(1)
  priv_print  String?    @db.VarChar(1)
  sec_groups  sec_groups @relation(fields: [group_id], references: [group_id], onDelete: Cascade, onUpdate: Restrict, map: "sec_groups_apps_ibfk_1")
  sec_apps    sec_apps   @relation(fields: [app_name], references: [app_name], onDelete: Cascade, onUpdate: Restrict, map: "sec_groups_apps_ibfk_2")

  @@id([group_id, app_name])
  @@index([app_name], map: "sec_groups_apps_ibfk_2")
}

model sec_users {
  login            String             @id @db.VarChar(255)
  pswd             String             @db.VarChar(255)
  name             String?            @db.VarChar(64)
  email            String?            @db.VarChar(255)
  active           String?            @db.VarChar(1)
  activation_code  String?            @db.VarChar(32)
  priv_admin       String?            @db.VarChar(1)
  pagos            pagos[]
  pedidos          pedidos[]
  sec_users_groups sec_users_groups[]
}

model sec_users_groups {
  login      String     @db.VarChar(255)
  group_id   Int
  sec_users  sec_users  @relation(fields: [login], references: [login], onDelete: Cascade, onUpdate: Restrict, map: "sec_users_groups_ibfk_1")
  sec_groups sec_groups @relation(fields: [group_id], references: [group_id], onDelete: Cascade, onUpdate: Restrict, map: "sec_users_groups_ibfk_2")

  @@id([login, group_id])
  @@index([group_id], map: "sec_users_groups_ibfk_2")
}

model tipoEnvase {
  id      Int       @id @default(autoincrement())
  nombre  String    @db.VarChar(150)
  envases envases[]
}

model tipoIva {
  id                                 Int        @id @default(autoincrement())
  nombre                             String     @db.VarChar(100)
  tasa                               Decimal    @db.Decimal(10, 2)
  discrimina                         String     @db.Char(1)
  clientes_clientes_tipoIvaTotipoIva clientes[] @relation("clientes_tipoIvaTotipoIva")
}

model tipoMediosPago {
  id        Int     @id @default(autoincrement())
  nombre    String  @db.VarChar(100)
  datosAdic String  @db.Char(1)
  pagos     pagos[]
}

model vendedores {
  id       Int        @id @default(autoincrement())
  nombre   String     @db.VarChar(150)
  login    String     @db.VarChar(255)
  TE       String?    @db.VarChar(100)
  clientes clientes[]

  @@index([login], map: "login")
}

enum prepedidos_cabecera_estado {
  borrador
  enviado
  terminado
}

enum ofertas_tipo {
  unitaria
  bundle
  minima
  mix
}

enum ofertas_backup_tipo {
  unitaria
  bundle
  minima
  mix
}

enum ofertas_modo_precio {
  precio_unitario
  precio_pack
  descuento_pct
}

enum ofertas_backup_modo_precio {
  precio_unitario
  precio_pack
  descuento_pct
}

enum ofertas_unidad_base {
  unidad
  caja
}

enum ofertas_backup_unidad_base {
  unidad
  caja
}
